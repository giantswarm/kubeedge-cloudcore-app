diff --git a/helm/kubeedge-cloudcore/templates/configmap_cloudcore.yaml b/helm/kubeedge-cloudcore/templates/configmap_cloudcore.yaml
index 320ece03a..a513095f8 100644
--- a/helm/kubeedge-cloudcore/templates/configmap_cloudcore.yaml
+++ b/helm/kubeedge-cloudcore/templates/configmap_cloudcore.yaml
@@ -1,3 +1,8 @@
+
+{{- $addressArray := default (list) .Values.cloudCore.modules.cloudHub.advertiseAddress }}
+{{- if and (not .Values.cloudCore.service.enable) (eq (len $addressArray) 0) }}
+{{ fail "Invalid configuration: cloudCore.service.enable is false and .cloudCore.modules.cloudHub.advertiseAddress is empty. One (or optionally both) must be set." }}
+{{- end }}
 apiVersion: v1
 kind: ConfigMap
 metadata:
@@ -5,6 +10,9 @@ metadata:
   {{- with .Values.cloudCore.labels }}
   labels: {{- toYaml . | nindent 4 }}
   {{- end }}
+  annotations:
+    "helm.sh/hook": "pre-install,pre-upgrade"
+    "helm.sh/hook-weight": "10"
 data:
   cloudcore.yaml: |
     apiVersion: cloudcore.config.kubeedge.io/v1alpha2
@@ -17,6 +25,10 @@ data:
     modules:
       cloudHub:
         advertiseAddress:
+        {{- if and (.Values.cloudCore.service.enable) }}
+        # Service IP will be injected below by the check-service-ip hook job
+        - PLACEHOLDER
+        {{- end }}
         {{- range .Values.cloudCore.modules.cloudHub.advertiseAddress }}
         - {{  .  }}
         {{- end}}
